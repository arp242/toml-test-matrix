<pre>
34ad28e
<b>FAIL</b> <b>valid/array/array</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 5 at offset 6 (TomlRB::ParseError)
<b> </b>      1987-07-05T17:45:00Z,
<b> </b>    
<b> </b>          ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 5 at offset 6 (Citrus::ParseError)
<b> </b>      1987-07-05T17:45:00Z,
<b> </b>    
<b> </b>          ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       ints = [1, 2, 3, ]
       floats = [1.1, 2.1, 3.1]
       strings = ["a", "b", "c"]
       dates = [
         1987-07-05T17:45:00Z,
         1979-05-27T07:32:00Z,
         2006-06-01T11:00:00Z,
       ]
       comments = [
                1,
                2, #this is ok
       ]

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 5 at offset 6 (TomlRB::ParseError)
         1987-07-05T17:45:00Z,
       
             ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 5 at offset 6 (Citrus::ParseError)
         1987-07-05T17:45:00Z,
       
             ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/array/mixed-int-array</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 1 at offset 23 (TomlRB::ParseError)
<b> </b>    arrays-and-ints =  [1, ["Arrays are not integers."]]
<b> </b>    
<b> </b>                           ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 1 at offset 23 (Citrus::ParseError)
<b> </b>    arrays-and-ints =  [1, ["Arrays are not integers."]]
<b> </b>    
<b> </b>                           ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       arrays-and-ints =  [1, ["Arrays are not integers."]]

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 1 at offset 23 (TomlRB::ParseError)
       arrays-and-ints =  [1, ["Arrays are not integers."]]
       
                              ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 1 at offset 23 (Citrus::ParseError)
       arrays-and-ints =  [1, ["Arrays are not integers."]]
       
                              ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/array/mixed-int-float</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 1 at offset 23 (TomlRB::ParseError)
<b> </b>    ints-and-floats = [1, 1.1]
<b> </b>    
<b> </b>                           ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 1 at offset 23 (Citrus::ParseError)
<b> </b>    ints-and-floats = [1, 1.1]
<b> </b>    
<b> </b>                           ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       ints-and-floats = [1, 1.1]

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 1 at offset 23 (TomlRB::ParseError)
       ints-and-floats = [1, 1.1]
       
                              ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 1 at offset 23 (Citrus::ParseError)
       ints-and-floats = [1, 1.1]
       
                              ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/array/mixed-int-string</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 1 at offset 26 (TomlRB::ParseError)
<b> </b>    strings-and-ints = ["hi", 42]
<b> </b>    
<b> </b>                              ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 1 at offset 26 (Citrus::ParseError)
<b> </b>    strings-and-ints = ["hi", 42]
<b> </b>    
<b> </b>                              ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       strings-and-ints = ["hi", 42]

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 1 at offset 26 (TomlRB::ParseError)
       strings-and-ints = ["hi", 42]
       
                                 ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 1 at offset 26 (Citrus::ParseError)
       strings-and-ints = ["hi", 42]
       
                                 ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/array/mixed-string-table</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 3 at offset 2 (TomlRB::ParseError)
<b> </b>      { name = "Baz Qux", email = "bazqux@example.com", url = "https://example.com/bazqux" }
<b> </b>    
<b> </b>      ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 3 at offset 2 (Citrus::ParseError)
<b> </b>      { name = "Baz Qux", email = "bazqux@example.com", url = "https://example.com/bazqux" }
<b> </b>    
<b> </b>      ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       contributors = [
         "Foo Bar <foo@example.com>",
         { name = "Baz Qux", email = "bazqux@example.com", url = "https://example.com/bazqux" }
       ]
       
       # Start with a table as the first element. This tests a case that some libraries
       # might have where they will check if the first entry is a table/map/hash/assoc
       # array and then encode it as a table array. This was a reasonable thing to do
       # before TOML 1.0 since arrays could only contain one type, but now it's no
       # longer.
       mixed = [{k="a"}, "b", 1]

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 3 at offset 2 (TomlRB::ParseError)
         { name = "Baz Qux", email = "bazqux@example.com", url = "https://example.com/bazqux" }
       
         ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 3 at offset 2 (Citrus::ParseError)
         { name = "Baz Qux", email = "bazqux@example.com", url = "https://example.com/bazqux" }
       
         ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/array/nested-double</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 4 at offset 9 (TomlRB::ParseError)
<b> </b>    		[1, 2, [3]]
<b> </b>    
<b> </b>             ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 4 at offset 9 (Citrus::ParseError)
<b> </b>    		[1, 2, [3]]
<b> </b>    
<b> </b>             ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       nest = [
       	[
       		["a"],
       		[1, 2, [3]]
       	]
       ]

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 4 at offset 9 (TomlRB::ParseError)
       		[1, 2, [3]]
       
                ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 4 at offset 9 (Citrus::ParseError)
       		[1, 2, [3]]
       
                ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/comment/everywhere</b>
<b> </b>    Key "group.d" is not "date-local" but "datetime":
<b> </b>      Expected:     map[string]any{"type":"date-local", "value":"1979-05-27"}
<b> </b>      Your encoder: map[string]any{"type":"datetime", "value":"1979-05-27T00:00:00+01:00"}

<b>     input sent to parser-cmd:</b>
       # Top comment.
         # Top comment.
       # Top comment.
       
       # [no-extraneous-groups-please]
       
       [group] # Comment
       answer = 42 # Comment
       # no-extraneous-keys-please = 999
       # Inbetween comment.
       more = [ # Comment
         # What about multiple # comments?
         # Can you handle it?
         #
                 # Evil.
       # Evil.
         42, 42, # Comments within arrays are fun.
         # What about multiple # comments?
         # Can you handle it?
         #
                 # Evil.
       # Evil.
       # ] Did I fool you?
       ] # Hopefully not.
       
       # Make sure the space between the datetime and "#" isn't lexed.
       dt = 1979-05-27T07:32:12-07:00  # c
       d = 1979-05-27 # Comment

<b>     output from parser-cmd (stdout):</b>
       {
         "group": {
           "answer": {
             "type": "integer",
             "value": "42"
           },
           "d": {
             "type": "datetime",
             "value": "1979-05-27T00:00:00+01:00"
           },
           "dt": {
             "type": "datetime",
             "value": "1979-05-27T07:32:12-07:00"
           },
           "more": [
             {
               "type": "integer",
               "value": "42"
             },
             {
               "type": "integer",
               "value": "42"
             }
           ]
         }
       }

<b>     want:</b>
       {
         "group": {
           "answer": {
             "type": "integer",
             "value": "42"
           },
           "d": {
             "type": "date-local",
             "value": "1979-05-27"
           },
           "dt": {
             "type": "datetime",
             "value": "1979-05-27T07:32:12-07:00"
           },
           "more": [
             {
               "type": "integer",
               "value": "42"
             },
             {
               "type": "integer",
               "value": "42"
             }
           ]
         }
       }

<b>FAIL</b> <b>valid/comment/tricky</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 22 at offset 5 (TomlRB::ParseError)
<b> </b>    2#,9
<b> </b>    
<b> </b>         ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 22 at offset 5 (Citrus::ParseError)
<b> </b>    2#,9
<b> </b>    
<b> </b>         ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       [section]#attached comment
       #[notsection]
       one = "11"#cmt
       two = "22#"
       three = '#'
       
       four = """# no comment
       # nor this
       #also not comment"""#is_comment
       
       five = 5.5#66
       six = 6#7
       8 = "eight"
       #nine = 99
       ten = 10e2#1
       eleven = 1.11e1#23
       
       ["hash#tag"]
       "#!" = "hash bang"
       arr3 = [ "#", '#', """###""" ]
       arr4 = [ 1,# 9, 9,
       2#,9
       ,#9
       3#]
       ,4]
       arr5 = [[[[#["#"],
       ["#"]]]]#]
       ]
       tbl1 = { "#" = '}#'}#}}

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 22 at offset 5 (TomlRB::ParseError)
       2#,9
       
            ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 22 at offset 5 (Citrus::ParseError)
       2#,9
       
            ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/datetime/datetime</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 2 at offset 21 (TomlRB::ParseError)
<b> </b>    lower = 1987-07-05t17:45:00z
<b> </b>    
<b> </b>                         ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 2 at offset 21 (Citrus::ParseError)
<b> </b>    lower = 1987-07-05t17:45:00z
<b> </b>    
<b> </b>                         ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       space = 1987-07-05 17:45:00Z
       lower = 1987-07-05t17:45:00z

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 2 at offset 21 (TomlRB::ParseError)
       lower = 1987-07-05t17:45:00z
       
                            ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 2 at offset 21 (Citrus::ParseError)
       lower = 1987-07-05t17:45:00z
       
                            ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/datetime/edge</b>
<b> </b>    Key "first-date" is not "date-local" but "datetime":
<b> </b>      Expected:     map[string]any{"type":"date-local", "value":"0001-01-01"}
<b> </b>      Your encoder: map[string]any{"type":"datetime", "value":"0001-01-01T00:00:00-00:25"}

<b>     input sent to parser-cmd:</b>
       first-offset = 0001-01-01 00:00:00Z
       first-local  = 0001-01-01 00:00:00
       first-date   = 0001-01-01
       
       last-offset = 9999-12-31 23:59:59Z
       last-local  = 9999-12-31 23:59:59
       last-date   = 9999-12-31

<b>     output from parser-cmd (stdout):</b>
       {
         "first-date": {
           "type": "datetime",
           "value": "0001-01-01T00:00:00-00:25"
         },
         "first-local": {
           "type": "datetime",
           "value": "0001-01-01T00:00:00-00:25"
         },
         "first-offset": {
           "type": "datetime",
           "value": "0001-01-01T00:00:00Z"
         },
         "last-date": {
           "type": "datetime",
           "value": "9999-12-31T00:00:00Z"
         },
         "last-local": {
           "type": "datetime",
           "value": "9999-12-31T23:59:59Z"
         },
         "last-offset": {
           "type": "datetime",
           "value": "9999-12-31T23:59:59Z"
         }
       }

<b>     want:</b>
       {
         "first-date": {
           "type": "date-local",
           "value": "0001-01-01"
         },
         "first-local": {
           "type": "datetime-local",
           "value": "0001-01-01T00:00:00"
         },
         "first-offset": {
           "type": "datetime",
           "value": "0001-01-01T00:00:00Z"
         },
         "last-date": {
           "type": "date-local",
           "value": "9999-12-31"
         },
         "last-local": {
           "type": "datetime-local",
           "value": "9999-12-31T23:59:59"
         },
         "last-offset": {
           "type": "datetime",
           "value": "9999-12-31T23:59:59Z"
         }
       }

<b>FAIL</b> <b>valid/datetime/leap-year</b>
<b> </b>    Key "2000-date" is not "date-local" but "datetime":
<b> </b>      Expected:     map[string]any{"type":"date-local", "value":"2000-02-29"}
<b> </b>      Your encoder: map[string]any{"type":"datetime", "value":"2000-02-29T00:00:00Z"}

<b>     input sent to parser-cmd:</b>
       2000-datetime       = 2000-02-29 15:15:15Z
       2000-datetime-local = 2000-02-29 15:15:15
       2000-date           = 2000-02-29
       
       2024-datetime       = 2024-02-29 15:15:15Z
       2024-datetime-local = 2024-02-29 15:15:15
       2024-date           = 2024-02-29

<b>     output from parser-cmd (stdout):</b>
       {
         "2000-date": {
           "type": "datetime",
           "value": "2000-02-29T00:00:00Z"
         },
         "2000-datetime": {
           "type": "datetime",
           "value": "2000-02-29T15:15:15Z"
         },
         "2000-datetime-local": {
           "type": "datetime",
           "value": "2000-02-29T15:15:15Z"
         },
         "2024-date": {
           "type": "datetime",
           "value": "2024-02-29T00:00:00Z"
         },
         "2024-datetime": {
           "type": "datetime",
           "value": "2024-02-29T15:15:15Z"
         },
         "2024-datetime-local": {
           "type": "datetime",
           "value": "2024-02-29T15:15:15Z"
         }
       }

<b>     want:</b>
       {
         "2000-date": {
           "type": "date-local",
           "value": "2000-02-29"
         },
         "2000-datetime": {
           "type": "datetime",
           "value": "2000-02-29T15:15:15Z"
         },
         "2000-datetime-local": {
           "type": "datetime-local",
           "value": "2000-02-29T15:15:15"
         },
         "2024-date": {
           "type": "date-local",
           "value": "2024-02-29"
         },
         "2024-datetime": {
           "type": "datetime",
           "value": "2024-02-29T15:15:15Z"
         },
         "2024-datetime-local": {
           "type": "datetime-local",
           "value": "2024-02-29T15:15:15"
         }
       }

<b>FAIL</b> <b>valid/datetime/local</b>
<b> </b>    Key "local" is not "datetime-local" but "datetime":
<b> </b>      Expected:     map[string]any{"type":"datetime-local", "value":"1987-07-05T17:45:00"}
<b> </b>      Your encoder: map[string]any{"type":"datetime", "value":"1987-07-05T17:45:00+01:00"}

<b>     input sent to parser-cmd:</b>
       local = 1987-07-05T17:45:00
       milli = 1977-12-21T10:32:00.555
       space = 1987-07-05 17:45:00

<b>     output from parser-cmd (stdout):</b>
       {
         "local": {
           "type": "datetime",
           "value": "1987-07-05T17:45:00+01:00"
         },
         "milli": {
           "type": "datetime",
           "value": "1977-12-21T10:32:00.5550Z"
         },
         "space": {
           "type": "datetime",
           "value": "1987-07-05T17:45:00+01:00"
         }
       }

<b>     want:</b>
       {
         "local": {
           "type": "datetime-local",
           "value": "1987-07-05T17:45:00"
         },
         "milli": {
           "type": "datetime-local",
           "value": "1977-12-21T10:32:00.555"
         },
         "space": {
           "type": "datetime-local",
           "value": "1987-07-05T17:45:00"
         }
       }

<b>FAIL</b> <b>valid/datetime/local-date</b>
<b> </b>    Key "bestdayever" is not "date-local" but "datetime":
<b> </b>      Expected:     map[string]any{"type":"date-local", "value":"1987-07-05"}
<b> </b>      Your encoder: map[string]any{"type":"datetime", "value":"1987-07-05T00:00:00+01:00"}

<b>     input sent to parser-cmd:</b>
       bestdayever = 1987-07-05

<b>     output from parser-cmd (stdout):</b>
       {
         "bestdayever": {
           "type": "datetime",
           "value": "1987-07-05T00:00:00+01:00"
         }
       }

<b>     want:</b>
       {
         "bestdayever": {
           "type": "date-local",
           "value": "1987-07-05"
         }
       }

<b>FAIL</b> <b>valid/datetime/local-time</b>
<b> </b>    Key "besttimeever" is not "time-local" but "datetime":
<b> </b>      Expected:     map[string]any{"type":"time-local", "value":"17:45:00"}
<b> </b>      Your encoder: map[string]any{"type":"datetime", "value":"1970-01-01T18:45:00+01:00"}

<b>     input sent to parser-cmd:</b>
       besttimeever = 17:45:00
       milliseconds = 10:32:00.555

<b>     output from parser-cmd (stdout):</b>
       {
         "besttimeever": {
           "type": "datetime",
           "value": "1970-01-01T18:45:00+01:00"
         },
         "milliseconds": {
           "type": "datetime",
           "value": "1970-01-01T11:32:00.5550+01:00"
         }
       }

<b>     want:</b>
       {
         "besttimeever": {
           "type": "time-local",
           "value": "17:45:00"
         },
         "milliseconds": {
           "type": "time-local",
           "value": "10:32:00.555"
         }
       }

<b>FAIL</b> <b>valid/inline-table/key-dotted</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:15:in `block (2 levels) in value': Key "a" is defined more than once (TomlRB::ValueOverwriteError)
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:15:in `merge!'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:15:in `block in value'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:13:in `each'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:13:in `value'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:8:in `accept_visitor'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/keyvalue.rb:48:in `visit_value'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/keyvalue.rb:17:in `assign'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:36:in `visit_keyvalue'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/keyvalue.rb:40:in `accept_visitor'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `block in initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `each'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       inline = {a.b = 42}
       
       many.dots.here.dot.dot.dot = {a.b.c = 1, a.b.d = 2}
       
       a = {   a.b  =  1   }
       b = {   "a"."b"  =  1   }
       c = {   a   .   b  =  1   }
       d = {   'a'   .   "b"  =  1   }
       e = {a.b=1}
       
       [tbl]
       a.b.c = {d.e=1}
       
       [tbl.x]
       a.b.c = {d.e=1}
       
       [[arr]]
       t = {a.b=1}
       T = {a.b=1}
       
       [[arr]]
       t = {a.b=2}
       T = {a.b=2}

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:15:in `block (2 levels) in value': Key "a" is defined more than once (TomlRB::ValueOverwriteError)
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:15:in `merge!'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:15:in `block in value'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:13:in `each'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:13:in `value'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/inline_table.rb:8:in `accept_visitor'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/keyvalue.rb:48:in `visit_value'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/keyvalue.rb:17:in `assign'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:36:in `visit_keyvalue'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/keyvalue.rb:40:in `accept_visitor'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `block in initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `each'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec/array-0</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 8 at offset 28 (TomlRB::ParseError)
<b> </b>    numbers = [ 0.1, 0.2, 0.5, 1, 2, 5 ]
<b> </b>    
<b> </b>                                ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 8 at offset 28 (Citrus::ParseError)
<b> </b>    numbers = [ 0.1, 0.2, 0.5, 1, 2, 5 ]
<b> </b>    
<b> </b>                                ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       integers = [ 1, 2, 3 ]
       colors = [ "red", "yellow", "green" ]
       nested_arrays_of_ints = [ [ 1, 2 ], [3, 4, 5] ]
       nested_mixed_array = [ [ 1, 2 ], ["a", "b", "c"] ]
       string_array = [ "all", 'strings', """are the same""", '''type''' ]
       
       # Mixed-type arrays are allowed
       numbers = [ 0.1, 0.2, 0.5, 1, 2, 5 ]
       contributors = [
         "Foo Bar <foo@example.com>",
         { name = "Baz Qux", email = "bazqux@example.com", url = "https://example.com/bazqux" }
       ]

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 8 at offset 28 (TomlRB::ParseError)
       numbers = [ 0.1, 0.2, 0.5, 1, 2, 5 ]
       
                                   ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 8 at offset 28 (Citrus::ParseError)
       numbers = [ 0.1, 0.2, 0.5, 1, 2, 5 ]
       
                                   ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec/local-date-0</b>
<b> </b>    Key "ld1" is not "date-local" but "datetime":
<b> </b>      Expected:     map[string]any{"type":"date-local", "value":"1979-05-27"}
<b> </b>      Your encoder: map[string]any{"type":"datetime", "value":"1979-05-27T00:00:00+01:00"}

<b>     input sent to parser-cmd:</b>
       ld1 = 1979-05-27

<b>     output from parser-cmd (stdout):</b>
       {
         "ld1": {
           "type": "datetime",
           "value": "1979-05-27T00:00:00+01:00"
         }
       }

<b>     want:</b>
       {
         "ld1": {
           "type": "date-local",
           "value": "1979-05-27"
         }
       }

<b>FAIL</b> <b>valid/spec/local-date-time-0</b>
<b> </b>    Key "ldt1" is not "datetime-local" but "datetime":
<b> </b>      Expected:     map[string]any{"type":"datetime-local", "value":"1979-05-27T07:32:00"}
<b> </b>      Your encoder: map[string]any{"type":"datetime", "value":"1979-05-27T07:32:00+01:00"}

<b>     input sent to parser-cmd:</b>
       ldt1 = 1979-05-27T07:32:00
       ldt2 = 1979-05-27T00:32:00.999999

<b>     output from parser-cmd (stdout):</b>
       {
         "ldt1": {
           "type": "datetime",
           "value": "1979-05-27T07:32:00+01:00"
         },
         "ldt2": {
           "type": "datetime",
           "value": "1979-05-27T00:32:00.9999+01:00"
         }
       }

<b>     want:</b>
       {
         "ldt1": {
           "type": "datetime-local",
           "value": "1979-05-27T07:32:00"
         },
         "ldt2": {
           "type": "datetime-local",
           "value": "1979-05-27T00:32:00.999999"
         }
       }

<b>FAIL</b> <b>valid/spec/local-time-0</b>
<b> </b>    Key "lt1" is not "time-local" but "datetime":
<b> </b>      Expected:     map[string]any{"type":"time-local", "value":"07:32:00"}
<b> </b>      Your encoder: map[string]any{"type":"datetime", "value":"1970-01-01T08:32:00+01:00"}

<b>     input sent to parser-cmd:</b>
       lt1 = 07:32:00
       lt2 = 00:32:00.999999

<b>     output from parser-cmd (stdout):</b>
       {
         "lt1": {
           "type": "datetime",
           "value": "1970-01-01T08:32:00+01:00"
         },
         "lt2": {
           "type": "datetime",
           "value": "1970-01-01T01:32:00.9999+01:00"
         }
       }

<b>     want:</b>
       {
         "lt1": {
           "type": "time-local",
           "value": "07:32:00"
         },
         "lt2": {
           "type": "time-local",
           "value": "00:32:00.999999"
         }
       }

<b>FAIL</b> <b>valid/spec/string-4</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 4 at offset 50 (TomlRB::ParseError)
<b> </b>    str6 = """Here are fifteen quotation marks: ""\"""\"""\"""\"""\"."""
<b> </b>    
<b> </b>                                                      ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 4 at offset 50 (Citrus::ParseError)
<b> </b>    str6 = """Here are fifteen quotation marks: ""\"""\"""\"""\"""\"."""
<b> </b>    
<b> </b>                                                      ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       str4 = """Here are two quotation marks: "". Simple enough."""
       # str5 = """Here are three quotation marks: """."""  # INVALID
       str5 = """Here are three quotation marks: ""\"."""
       str6 = """Here are fifteen quotation marks: ""\"""\"""\"""\"""\"."""
       
       # "This," she said, "is just a pointless statement."
       str7 = """"This," she said, "is just a pointless statement.""""

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 4 at offset 50 (TomlRB::ParseError)
       str6 = """Here are fifteen quotation marks: ""\"""\"""\"""\"""\"."""
       
                                                         ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 4 at offset 50 (Citrus::ParseError)
       str6 = """Here are fifteen quotation marks: ""\"""\"""\"""\"""\"."""
       
                                                         ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec/table-7</b>
<b> </b>    Key "owner.member_since" is not "date-local" but "datetime":
<b> </b>      Expected:     map[string]any{"type":"date-local", "value":"1999-08-04"}
<b> </b>      Your encoder: map[string]any{"type":"datetime", "value":"1999-08-04T00:00:00+01:00"}

<b>     input sent to parser-cmd:</b>
       # Top-level table begins.
       name = "Fido"
       breed = "pug"
       
       # Top-level table ends.
       [owner]
       name = "Regina Dogman"
       member_since = 1999-08-04

<b>     output from parser-cmd (stdout):</b>
       {
         "breed": {
           "type": "string",
           "value": "pug"
         },
         "name": {
           "type": "string",
           "value": "Fido"
         },
         "owner": {
           "member_since": {
             "type": "datetime",
             "value": "1999-08-04T00:00:00+01:00"
           },
           "name": {
             "type": "string",
             "value": "Regina Dogman"
           }
         }
       }

<b>     want:</b>
       {
         "breed": {
           "type": "string",
           "value": "pug"
         },
         "name": {
           "type": "string",
           "value": "Fido"
         },
         "owner": {
           "member_since": {
             "type": "date-local",
             "value": "1999-08-04"
           },
           "name": {
             "type": "string",
             "value": "Regina Dogman"
           }
         }
       }

<b>FAIL</b> <b>valid/string/ends-in-whitespace-escape</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:38:in `parse_error': Escape sequence \  is reserved (TomlRB::ParseError)
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:30:in `block in transform_escaped_chars'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:28:in `gsub'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:28:in `transform_escaped_chars'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:56:in `value'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/keyvalue.rb:55:in `value'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `map'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       beee = """
       heeee
       geeee\  
       
       
             """

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:38:in `parse_error': Escape sequence \  is reserved (TomlRB::ParseError)
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:30:in `block in transform_escaped_chars'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:28:in `gsub'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:28:in `transform_escaped_chars'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:56:in `value'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/keyvalue.rb:55:in `value'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `map'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/string/escape-tricky</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 10 at offset 45 (TomlRB::ParseError)
<b> </b>    multiline_end_esc = """When will it end? \"""...""\" should be here\""""
<b> </b>    
<b> </b>                                                 ^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 10 at offset 45 (Citrus::ParseError)
<b> </b>    multiline_end_esc = """When will it end? \"""...""\" should be here\""""
<b> </b>    
<b> </b>                                                 ^
<b> </b>    	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       end_esc = "String does not end here\" but ends here\\"
       lit_end_esc = 'String ends here\'
       
       multiline_unicode = """
       \u00a0"""
       
       multiline_not_unicode = """
       \\u0041"""
       
       multiline_end_esc = """When will it end? \"""...""\" should be here\""""
       
       lit_multiline_not_unicode = '''
       \u007f'''
       
       lit_multiline_end = '''There is no escape\'''

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:16:in `rescue in initialize': Failed to parse input on line 10 at offset 45 (TomlRB::ParseError)
       multiline_end_esc = """When will it end? \"""...""\" should be here\""""
       
                                                    ^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:669:in `parse': Failed to parse input on line 10 at offset 45 (Citrus::ParseError)
       multiline_end_esc = """When will it end? \"""...""\" should be here\""""
       
                                                    ^
       	from /home/martin/.cache/gem/ruby/3.2.0/gems/citrus-3.0.2/lib/citrus.rb:392:in `parse'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:13:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/string/multiline</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:38:in `parse_error': Escape sequence \  is reserved (TomlRB::ParseError)
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:30:in `block in transform_escaped_chars'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:28:in `gsub'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:28:in `transform_escaped_chars'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:56:in `value'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/keyvalue.rb:55:in `value'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `map'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       # NOTE: this file includes some literal tab characters.
       
       multiline_empty_one = """"""
       
       # A newline immediately following the opening delimiter will be trimmed.
       multiline_empty_two = """
       """
       
       # \ at the end of line trims newlines as well; note that last \ is followed by
       # two spaces, which are ignored.
       multiline_empty_three = """\
           """
       multiline_empty_four = """\
          \
          \  
          """
       
       equivalent_one = "The quick brown fox jumps over the lazy dog."
       equivalent_two = """
       The quick brown \
       
       
         fox jumps over \
           the lazy dog."""
       
       equivalent_three = """\
              The quick brown \
              fox jumps over \
              the lazy dog.\
              """
       
       whitespace-after-bs = """\
              The quick brown \
              fox jumps over \   
              the lazy dog.\	
              """
       
       no-space = """a\
           b"""
       
       # Has tab character.
       keep-ws-before = """a   	\
          b"""
       
       escape-bs-1 = """a \\
       b"""
       
       escape-bs-2 = """a \\\
       b"""
       
       escape-bs-3 = """a \\\\
         b"""

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:38:in `parse_error': Escape sequence \  is reserved (TomlRB::ParseError)
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:30:in `block in transform_escaped_chars'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:28:in `gsub'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:28:in `transform_escaped_chars'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/string.rb:56:in `value'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/keyvalue.rb:55:in `value'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `map'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/table/names</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/table.rb:33:in `ensure_key_not_defined': Key "a.b.c" is defined more than once (TomlRB::ValueOverwriteError)
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/table.rb:8:in `navigate_keys'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:32:in `visit_table'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/table.rb:22:in `accept_visitor'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `block in initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `each'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       [a.b.c]
       [a."b.c"]
       [a.'d.e']
       [a.' x ']
       [ d.e.f ]
       [ g . h . i ]
       [ j . "" . 'l' ]
       
       [x.1.2]

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/table.rb:33:in `ensure_key_not_defined': Key "a.b.c" is defined more than once (TomlRB::ValueOverwriteError)
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/table.rb:8:in `navigate_keys'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:32:in `visit_table'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/table.rb:22:in `accept_visitor'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `block in initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `each'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/parser.rb:14:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:47:in `parse'
       	from ./src/ruby-toml-rb/ruby-toml-rb-decoder:38:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>invalid/array/extending-table</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       a = [{ b = 1 }]
       
       # Cannot extend tables within static arrays
       # https://github.com/toml-lang/toml/issues/908
       [a.c]
       foo = 1

<b>     output from parser-cmd (stdout):</b>
       {
         "a": [
           {
             "b": {
               "type": "integer",
               "value": "1"
             },
             "c": {
               "foo": {
                 "type": "integer",
                 "value": "1"
               }
             }
           }
         ]
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/array/only-comma-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       only-comma-1 = [,]

<b>     output from parser-cmd (stdout):</b>
       {
         "only-comma-1": []
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/array/tables-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # INVALID TOML DOC
       fruit = []
       
       [[fruit]] # Not allowed

<b>     output from parser-cmd (stdout):</b>
       {
         "fruit": [
           {}
         ]
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/comment-cr</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       comment-cr   = "Carriage return in comment" # a=1

<b>     output from parser-cmd (stdout):</b>
       {
         "comment-cr": {
           "type": "string",
           "value": "Carriage return in comment"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/comment-del</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       comment-del  = "0x7f"   # 

<b>     output from parser-cmd (stdout):</b>
       {
         "comment-del": {
           "type": "string",
           "value": "0x7f"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/comment-ff</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       comment-ff   = "0x7f"   # 

<b>     output from parser-cmd (stdout):</b>
       {
         "comment-ff": {
           "type": "string",
           "value": "0x7f"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/comment-lf</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       comment-lf   = "ctrl-P" # 

<b>     output from parser-cmd (stdout):</b>
       {
         "comment-lf": {
           "type": "string",
           "value": "ctrl-P"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/comment-null</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       comment-null = "null"   #  

<b>     output from parser-cmd (stdout):</b>
       {
         "comment-null": {
           "type": "string",
           "value": "null"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/comment-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       comment-us   = "ctrl-_" # 

<b>     output from parser-cmd (stdout):</b>
       {
         "comment-us": {
           "type": "string",
           "value": "ctrl-_"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/multi-cr</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       multi-cr   = """null"""

<b>     output from parser-cmd (stdout):</b>
       {
         "multi-cr": {
           "type": "string",
           "value": "null\r"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/multi-del</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       multi-del  = """null"""

<b>     output from parser-cmd (stdout):</b>
       {
         "multi-del": {
           "type": "string",
           "value": "null"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/multi-lf</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       multi-lf   = """null"""

<b>     output from parser-cmd (stdout):</b>
       {
         "multi-lf": {
           "type": "string",
           "value": "null\u0010"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/multi-null</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       multi-null = """null """

<b>     output from parser-cmd (stdout):</b>
       {
         "multi-null": {
           "type": "string",
           "value": "null\u0000"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/multi-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       multi-us   = """null"""

<b>     output from parser-cmd (stdout):</b>
       {
         "multi-us": {
           "type": "string",
           "value": "null\u001f"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawmulti-cd</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawmulti-cd   = '''null'''

<b>     output from parser-cmd (stdout):</b>
       {
         "rawmulti-cd": {
           "type": "string",
           "value": "null\r"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawmulti-del</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawmulti-del  = '''null'''

<b>     output from parser-cmd (stdout):</b>
       {
         "rawmulti-del": {
           "type": "string",
           "value": "null"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawmulti-lf</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawmulti-lf   = '''null'''

<b>     output from parser-cmd (stdout):</b>
       {
         "rawmulti-lf": {
           "type": "string",
           "value": "null\u0010"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawmulti-null</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawmulti-null = '''null '''

<b>     output from parser-cmd (stdout):</b>
       {
         "rawmulti-null": {
           "type": "string",
           "value": "null\u0000"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawmulti-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawmulti-us   = '''null'''

<b>     output from parser-cmd (stdout):</b>
       {
         "rawmulti-us": {
           "type": "string",
           "value": "null\u001f"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawstring-cr</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawstring-cr   = 'null'

<b>     output from parser-cmd (stdout):</b>
       {
         "rawstring-cr": {
           "type": "string",
           "value": "null\r"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawstring-del</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawstring-del  = 'null'

<b>     output from parser-cmd (stdout):</b>
       {
         "rawstring-del": {
           "type": "string",
           "value": "null"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawstring-lf</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawstring-lf   = 'null'

<b>     output from parser-cmd (stdout):</b>
       {
         "rawstring-lf": {
           "type": "string",
           "value": "null\u0010"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawstring-null</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawstring-null = 'null '

<b>     output from parser-cmd (stdout):</b>
       {
         "rawstring-null": {
           "type": "string",
           "value": "null\u0000"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/rawstring-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       rawstring-us   = 'null'

<b>     output from parser-cmd (stdout):</b>
       {
         "rawstring-us": {
           "type": "string",
           "value": "null\u001f"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/string-bs</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       string-bs   = "backspace"

<b>     output from parser-cmd (stdout):</b>
       {
         "string-bs": {
           "type": "string",
           "value": "backspace\u0008"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/string-cr</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       string-cr   = "null"

<b>     output from parser-cmd (stdout):</b>
       {
         "string-cr": {
           "type": "string",
           "value": "null\r"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/string-del</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       string-del  = "null"

<b>     output from parser-cmd (stdout):</b>
       {
         "string-del": {
           "type": "string",
           "value": "null"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/string-lf</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       string-lf   = "null"

<b>     output from parser-cmd (stdout):</b>
       {
         "string-lf": {
           "type": "string",
           "value": "null\u0010"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/string-null</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       string-null = "null "

<b>     output from parser-cmd (stdout):</b>
       {
         "string-null": {
           "type": "string",
           "value": "null\u0000"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/control/string-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       string-us   = "null"

<b>     output from parser-cmd (stdout):</b>
       {
         "string-us": {
           "type": "string",
           "value": "null\u001f"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/datetime/feb-29</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "not a leap year" = 2100-02-29T15:15:15Z

<b>     output from parser-cmd (stdout):</b>
       {
         "not a leap year": {
           "type": "datetime",
           "value": "2100-03-01T15:15:15Z"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/datetime/feb-30</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "only 28 or 29 days in february" = 1988-02-30T15:15:15Z

<b>     output from parser-cmd (stdout):</b>
       {
         "only 28 or 29 days in february": {
           "type": "datetime",
           "value": "1988-03-01T15:15:15Z"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/datetime/hour-over</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # time-hour       = 2DIGIT  ; 00-23
       d = 2006-01-01T24:00:00-00:00

<b>     output from parser-cmd (stdout):</b>
       {
         "d": {
           "type": "datetime",
           "value": "2006-01-02T00:00:00Z"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/exp-double-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       exp-double-us = 1e__23

<b>     output from parser-cmd (stdout):</b>
       {
         "exp-double-us": {
           "type": "float",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/exp-leading-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       exp-leading-us = 1e_23

<b>     output from parser-cmd (stdout):</b>
       {
         "exp-leading-us": {
           "type": "float",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/exp-trailing-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       exp-trailing-us = 1e23_

<b>     output from parser-cmd (stdout):</b>
       {
         "exp-trailing-us": {
           "type": "float",
           "value": "1.0e+23"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/exp-trailing-us-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       exp-trailing-us-1 = 1_e2

<b>     output from parser-cmd (stdout):</b>
       {
         "exp-trailing-us-1": {
           "type": "float",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/exp-trailing-us-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       exp-trailing-us-2 = 1.2_e2

<b>     output from parser-cmd (stdout):</b>
       {
         "exp-trailing-us-2": {
           "type": "float",
           "value": "1.2"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/leading-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-us = _1.2

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-us": {
           "type": "float",
           "value": "0"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/leading-zero</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-zero = 03.14

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-zero": {
           "type": "float",
           "value": "3.14"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/leading-zero-neg</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-zero-neg = -03.14

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-zero-neg": {
           "type": "float",
           "value": "-3.14"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/leading-zero-plus</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-zero-plus = +03.14

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-zero-plus": {
           "type": "float",
           "value": "3.14"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/trailing-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       trailing-us = 1.2_

<b>     output from parser-cmd (stdout):</b>
       {
         "trailing-us": {
           "type": "float",
           "value": "1.2"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/trailing-us-exp-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       trailing-us-exp-1 = 1_e2

<b>     output from parser-cmd (stdout):</b>
       {
         "trailing-us-exp-1": {
           "type": "float",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/trailing-us-exp-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       trailing-us-exp-2 = 1.2_e2

<b>     output from parser-cmd (stdout):</b>
       {
         "trailing-us-exp-2": {
           "type": "float",
           "value": "1.2"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/us-after-point</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       us-after-point = 1._2

<b>     output from parser-cmd (stdout):</b>
       {
         "us-after-point": {
           "type": "float",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/float/us-before-point</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       us-before-point = 1_.2

<b>     output from parser-cmd (stdout):</b>
       {
         "us-before-point": {
           "type": "float",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/inline-table/overwrite-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       a={}
       # Inline tables are immutable and can't be extended
       [a.b]

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {
           "b": {}
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/inline-table/overwrite-5</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       inline-t = { nest = {} }
       
       [inline-t.nest]

<b>     output from parser-cmd (stdout):</b>
       {
         "inline-t": {
           "nest": {}
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/double-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       double-us = 1__23

<b>     output from parser-cmd (stdout):</b>
       {
         "double-us": {
           "type": "integer",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/leading-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-us = _123

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-us": {
           "type": "integer",
           "value": "0"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/leading-zero-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-zero-1 = 01

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-zero-1": {
           "type": "integer",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/leading-zero-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-zero-2 = 00

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-zero-2": {
           "type": "integer",
           "value": "0"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/leading-zero-3</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-zero-3 = 0_0

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-zero-3": {
           "type": "integer",
           "value": "0"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/leading-zero-sign-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-zero-sign-1 = -01

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-zero-sign-1": {
           "type": "integer",
           "value": "-1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/leading-zero-sign-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-zero-sign-2 = +01

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-zero-sign-2": {
           "type": "integer",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/leading-zero-sign-3</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       leading-zero-sign-3 = +0_1

<b>     output from parser-cmd (stdout):</b>
       {
         "leading-zero-sign-3": {
           "type": "integer",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/trailing-us</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       trailing-us = 123_

<b>     output from parser-cmd (stdout):</b>
       {
         "trailing-us": {
           "type": "integer",
           "value": "123"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/trailing-us-bin</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       trailing-us-bin = 0b1_

<b>     output from parser-cmd (stdout):</b>
       {
         "trailing-us-bin": {
           "type": "integer",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/trailing-us-hex</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       trailing-us-hex = 0x1_

<b>     output from parser-cmd (stdout):</b>
       {
         "trailing-us-hex": {
           "type": "integer",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/trailing-us-oct</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       trailing-us-oct = 0o1_

<b>     output from parser-cmd (stdout):</b>
       {
         "trailing-us-oct": {
           "type": "integer",
           "value": "1"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/us-after-bin</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       us-after-bin = 0b_1

<b>     output from parser-cmd (stdout):</b>
       {
         "us-after-bin": {
           "type": "integer",
           "value": "0"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/us-after-hex</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       us-after-hex = 0x_1

<b>     output from parser-cmd (stdout):</b>
       {
         "us-after-hex": {
           "type": "integer",
           "value": "0"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/integer/us-after-oct</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       us-after-oct = 0o_1

<b>     output from parser-cmd (stdout):</b>
       {
         "us-after-oct": {
           "type": "integer",
           "value": "0"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/key/after-array</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [[agencies]] owner = "S Cjelli"

<b>     output from parser-cmd (stdout):</b>
       {
         "agencies": [
           {
             "owner": {
               "type": "string",
               "value": "S Cjelli"
             }
           }
         ]
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/key/after-table</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [error] this = "should not be here"

<b>     output from parser-cmd (stdout):</b>
       {
         "error": {
           "this": {
             "type": "string",
             "value": "should not be here"
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/key/after-value</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       first = "Tom" last = "Preston-Werner" # INVALID

<b>     output from parser-cmd (stdout):</b>
       {
         "first": {
           "type": "string",
           "value": "Tom"
         },
         "last": {
           "type": "string",
           "value": "Preston-Werner"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/key/no-eol</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       a = 1 b = 2

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {
           "type": "integer",
           "value": "1"
         },
         "b": {
           "type": "integer",
           "value": "2"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-date/feb-29</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "not a leap year" = 2100-02-29

<b>     output from parser-cmd (stdout):</b>
       {
         "not a leap year": {
           "type": "datetime",
           "value": "2100-03-01T00:00:00Z"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-date/feb-30</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "only 28 or 29 days in february" = 1988-02-30

<b>     output from parser-cmd (stdout):</b>
       {
         "only 28 or 29 days in february": {
           "type": "datetime",
           "value": "1988-03-01T00:00:00Z"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-datetime/feb-29</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "not a leap year" = 2100-02-29T15:15:15

<b>     output from parser-cmd (stdout):</b>
       {
         "not a leap year": {
           "type": "datetime",
           "value": "2100-03-01T15:15:15Z"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-datetime/feb-30</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       "only 28 or 29 days in february" = 1988-02-30T15:15:15

<b>     output from parser-cmd (stdout):</b>
       {
         "only 28 or 29 days in february": {
           "type": "datetime",
           "value": "1988-03-01T15:15:15Z"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-datetime/hour-over</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # time-hour       = 2DIGIT  ; 00-23
       d = 2006-01-01T24:00:00

<b>     output from parser-cmd (stdout):</b>
       {
         "d": {
           "type": "datetime",
           "value": "2006-01-02T00:00:00Z"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-time/hour-over</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # time-hour       = 2DIGIT  ; 00-23
       d = 24:00:00

<b>     output from parser-cmd (stdout):</b>
       {
         "d": {
           "type": "datetime",
           "value": "1970-01-02T01:00:00+01:00"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-time/minute-over</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # time-minute     = 2DIGIT  ; 00-59
       d = 00:60:00

<b>     output from parser-cmd (stdout):</b>
       {
         "d": {
           "type": "datetime",
           "value": "1970-01-01T02:00:00+01:00"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/local-time/second-over</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
       #                           ; rules
       d = 00:00:61

<b>     output from parser-cmd (stdout):</b>
       {
         "d": {
           "type": "datetime",
           "value": "1970-01-01T01:01:01+01:00"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/spec/table-9-0</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [fruit]
       apple.color = "red"
       apple.taste.sweet = true
       
       [fruit.apple]  # INVALID
       # [fruit.apple.taste]  # INVALID
       
       [fruit.apple.texture]  # you can add sub-tables
       smooth = true

<b>     output from parser-cmd (stdout):</b>
       {
         "fruit": {
           "apple": {
             "color": {
               "type": "string",
               "value": "red"
             },
             "taste": {
               "sweet": {
                 "type": "bool",
                 "value": "true"
               }
             },
             "texture": {
               "smooth": {
                 "type": "bool",
                 "value": "true"
               }
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/spec/table-9-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [fruit]
       apple.color = "red"
       apple.taste.sweet = true
       
       # [fruit.apple]  # INVALID
       [fruit.apple.taste]  # INVALID
       
       [fruit.apple.texture]  # you can add sub-tables
       smooth = true

<b>     output from parser-cmd (stdout):</b>
       {
         "fruit": {
           "apple": {
             "color": {
               "type": "string",
               "value": "red"
             },
             "taste": {
               "sweet": {
                 "type": "bool",
                 "value": "true"
               }
             },
             "texture": {
               "smooth": {
                 "type": "bool",
                 "value": "true"
               }
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/string/bad-escape-3</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       backslash = "\"

<b>     output from parser-cmd (stdout):</b>
       {
         "backslash": {
           "type": "string",
           "value": ""
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/string/literal-multiline-quotes-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       a = '''6 apostrophes: ''''''

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {
           "type": "string",
           "value": "6 apostrophes: '''"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/string/literal-multiline-quotes-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       a = '''15 apostrophes: ''''''''''''''''''

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {
           "type": "string",
           "value": "15 apostrophes: '''''''''''''''"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/string/multiline-bad-escape-4</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       backslash = """\"""

<b>     output from parser-cmd (stdout):</b>
       {
         "backslash": {
           "type": "string",
           "value": "\\"
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/string/multiline-quotes-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       a = """6 quotes: """"""

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {
           "type": "string",
           "value": "6 quotes: \"\"\""
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/table/append-with-dotted-keys-1</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # First a.b.c defines a table: a.b.c = {z=9}
       #
       # Then we define a.b.c.t = "str" to add a str to the above table, making it:
       #
       #   a.b.c = {z=9, t="..."}
       #
       # While this makes sense, logically, it was decided this is not valid TOML as
       # it's too confusing/convoluted.
       # 
       # See: https://github.com/toml-lang/toml/issues/846
       #      https://github.com/toml-lang/toml/pull/859
       
       [a.b.c]
         z = 9
       
       [a]
         b.c.t = "Using dotted keys to add to [a.b.c] after explicitly defining it above is not allowed"

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {
           "b": {
             "c": {
               "t": {
                 "type": "string",
                 "value": "Using dotted keys to add to [a.b.c] after explicitly defining it above is not allowed"
               },
               "z": {
                 "type": "integer",
                 "value": "9"
               }
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/table/append-with-dotted-keys-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       # This is the same issue as in injection-1.toml, except that nests one level
       # deeper. See that file for a more complete description.
       
       [a.b.c.d]
         z = 9
       
       [a]
         b.c.d.k.t = "Using dotted keys to add to [a.b.c.d] after explicitly defining it above is not allowed"

<b>     output from parser-cmd (stdout):</b>
       {
         "a": {
           "b": {
             "c": {
               "d": {
                 "k": {
                   "t": {
                     "type": "string",
                     "value": "Using dotted keys to add to [a.b.c.d] after explicitly defining it above is not allowed"
                   }
                 },
                 "z": {
                   "type": "integer",
                   "value": "9"
                 }
               }
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/table/duplicate-key-dotted-table</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [fruit]
       apple.color = "red"
       
       [fruit.apple] # INVALID

<b>     output from parser-cmd (stdout):</b>
       {
         "fruit": {
           "apple": {
             "color": {
               "type": "string",
               "value": "red"
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/table/duplicate-key-dotted-table2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [fruit]
       apple.taste.sweet = true
       
       [fruit.apple.taste] # INVALID

<b>     output from parser-cmd (stdout):</b>
       {
         "fruit": {
           "apple": {
             "taste": {
               "sweet": {
                 "type": "bool",
                 "value": "true"
               }
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/table/duplicate-table-array2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [[tbl]]
       [tbl]

<b>     output from parser-cmd (stdout):</b>
       {
         "tbl": [
           {}
         ]
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/table/redefine-2</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [t1]
       t2.t3.v = 0
       [t1.t2]

<b>     output from parser-cmd (stdout):</b>
       {
         "t1": {
           "t2": {
             "t3": {
               "v": {
                 "type": "integer",
                 "value": "0"
               }
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

<b>FAIL</b> <b>invalid/table/redefine-3</b>
<b> </b>    Expected an error, but no error was reported.

<b>     input sent to parser-cmd:</b>
       [t1]
       t2.t3.v = 0
       [t1.t2.t3]

<b>     output from parser-cmd (stdout):</b>
       {
         "t1": {
           "t2": {
             "t3": {
               "v": {
                 "type": "integer",
                 "value": "0"
               }
             }
           }
         }
       }

<b>     want:</b>
       Exit code 1

toml-test v2023-12-03 [./src/ruby-toml-rb/ruby-toml-rb-decoder]: using embedded tests
  valid tests: 144 passed, 25 failed
invalid tests: 278 passed, 90 failed

==> ENCODER TESTS
<b>FAIL</b> <b>valid/array/array</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
<b> </b>    
<b> </b>        when "datetime" then Time.iso8601(val)
<b> </b>                                 ^^^^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:9:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:9:in `map'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:9:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "comments": [
           {
             "type": "integer",
             "value": "1"
           },
           {
             "type": "integer",
             "value": "2"
           }
         ],
         "dates": [
           {
             "type": "datetime",
             "value": "1987-07-05T17:45:00Z"
           },
           {
             "type": "datetime",
             "value": "1979-05-27T07:32:00Z"
           },
           {
             "type": "datetime",
             "value": "2006-06-01T11:00:00Z"
           }
         ],
         "floats": [
           {
             "type": "float",
             "value": "1.1"
           },
           {
             "type": "float",
             "value": "2.1"
           },
           {
             "type": "float",
             "value": "3.1"
           }
         ],
         "ints": [
           {
             "type": "integer",
             "value": "1"
           },
           {
             "type": "integer",
             "value": "2"
           },
           {
             "type": "integer",
             "value": "3"
           }
         ],
         "strings": [
           {
             "type": "string",
             "value": "a"
           },
           {
             "type": "string",
             "value": "b"
           },
           {
             "type": "string",
             "value": "c"
           }
         ]
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
       
           when "datetime" then Time.iso8601(val)
                                    ^^^^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:9:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:9:in `map'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:9:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/array/mixed-string-table</b>
<b> </b>    /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:32:in `sort_pairs': undefined method `keys' for "b":String (NoMethodError)
<b> </b>    
<b> </b>          hash.keys.sort.each do |key|
<b> </b>              ^^^^^
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:77:in `block (2 levels) in dump_table_array_pairs'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:75:in `each'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:75:in `block in dump_table_array_pairs'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:71:in `each'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:71:in `dump_table_array_pairs'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:52:in `dump_pairs'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:24:in `visit'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:12:in `initialize'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:98:in `new'
<b> </b>    	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:98:in `dump'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "contributors": [
           {
             "type": "string",
             "value": "Foo Bar \u003cfoo@example.com\u003e"
           },
           {
             "email": {
               "type": "string",
               "value": "bazqux@example.com"
             },
             "name": {
               "type": "string",
               "value": "Baz Qux"
             },
             "url": {
               "type": "string",
               "value": "https://example.com/bazqux"
             }
           }
         ],
         "mixed": [
           {
             "k": {
               "type": "string",
               "value": "a"
             }
           },
           {
             "type": "string",
             "value": "b"
           },
           {
             "type": "integer",
             "value": "1"
           }
         ]
       }

<b>     output from parser-cmd (stderr):</b>
       /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:32:in `sort_pairs': undefined method `keys' for "b":String (NoMethodError)
       
             hash.keys.sort.each do |key|
                 ^^^^^
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:77:in `block (2 levels) in dump_table_array_pairs'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:75:in `each'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:75:in `block in dump_table_array_pairs'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:71:in `each'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:71:in `dump_table_array_pairs'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:52:in `dump_pairs'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:24:in `visit'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb/dumper.rb:12:in `initialize'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:98:in `new'
       	from /home/martin/code/toml/toml-test-matrix/src/ruby-toml-rb/lib/toml-rb.rb:98:in `dump'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/comment/after-literal-no-ws</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 2 (last key "inf"): expected value but found "Infinity" instead

<b>     input sent to parser-cmd:</b>
       {
         "false": {
           "type": "bool",
           "value": "false"
         },
         "inf": {
           "type": "float",
           "value": "inf"
         },
         "nan": {
           "type": "float",
           "value": "nan"
         },
         "true": {
           "type": "bool",
           "value": "true"
         }
       }

<b>     output from parser-cmd (stdout):</b>
       false = false
       inf = Infinity
       nan = NaN
       true = true

<b>     want:</b>
       inf=inf#infinity
       nan=nan#not a number
       true=true#true
       false=false#false

<b>FAIL</b> <b>valid/comment/everywhere</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
<b> </b>    
<b> </b>      if json.key?("type")
<b> </b>             ^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "group": {
           "answer": {
             "type": "integer",
             "value": "42"
           },
           "d": {
             "type": "date-local",
             "value": "1979-05-27"
           },
           "dt": {
             "type": "datetime",
             "value": "1979-05-27T07:32:12-07:00"
           },
           "more": [
             {
               "type": "integer",
               "value": "42"
             },
             {
               "type": "integer",
               "value": "42"
             }
           ]
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
       
         if json.key?("type")
                ^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/datetime/datetime</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
<b> </b>    
<b> </b>        when "datetime" then Time.iso8601(val)
<b> </b>                                 ^^^^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "lower": {
           "type": "datetime",
           "value": "1987-07-05T17:45:00Z"
         },
         "space": {
           "type": "datetime",
           "value": "1987-07-05T17:45:00Z"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
       
           when "datetime" then Time.iso8601(val)
                                    ^^^^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/datetime/edge</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
<b> </b>    
<b> </b>      if json.key?("type")
<b> </b>             ^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "first-date": {
           "type": "date-local",
           "value": "0001-01-01"
         },
         "first-local": {
           "type": "datetime-local",
           "value": "0001-01-01T00:00:00"
         },
         "first-offset": {
           "type": "datetime",
           "value": "0001-01-01T00:00:00Z"
         },
         "last-date": {
           "type": "date-local",
           "value": "9999-12-31"
         },
         "last-local": {
           "type": "datetime-local",
           "value": "9999-12-31T23:59:59"
         },
         "last-offset": {
           "type": "datetime",
           "value": "9999-12-31T23:59:59Z"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
       
         if json.key?("type")
                ^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/datetime/leap-year</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
<b> </b>    
<b> </b>      if json.key?("type")
<b> </b>             ^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "2000-date": {
           "type": "date-local",
           "value": "2000-02-29"
         },
         "2000-datetime": {
           "type": "datetime",
           "value": "2000-02-29T15:15:15Z"
         },
         "2000-datetime-local": {
           "type": "datetime-local",
           "value": "2000-02-29T15:15:15"
         },
         "2024-date": {
           "type": "date-local",
           "value": "2024-02-29"
         },
         "2024-datetime": {
           "type": "datetime",
           "value": "2024-02-29T15:15:15Z"
         },
         "2024-datetime-local": {
           "type": "datetime-local",
           "value": "2024-02-29T15:15:15"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
       
         if json.key?("type")
                ^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/datetime/local</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "datetime-local":String (NoMethodError)
<b> </b>    
<b> </b>      if json.key?("type")
<b> </b>             ^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "local": {
           "type": "datetime-local",
           "value": "1987-07-05T17:45:00"
         },
         "milli": {
           "type": "datetime-local",
           "value": "1977-12-21T10:32:00.555"
         },
         "space": {
           "type": "datetime-local",
           "value": "1987-07-05T17:45:00"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "datetime-local":String (NoMethodError)
       
         if json.key?("type")
                ^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/datetime/local-date</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
<b> </b>    
<b> </b>      if json.key?("type")
<b> </b>             ^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "bestdayever": {
           "type": "date-local",
           "value": "1987-07-05"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
       
         if json.key?("type")
                ^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/datetime/local-time</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "time-local":String (NoMethodError)
<b> </b>    
<b> </b>      if json.key?("type")
<b> </b>             ^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "besttimeever": {
           "type": "time-local",
           "value": "17:45:00"
         },
         "milliseconds": {
           "type": "time-local",
           "value": "10:32:00.555"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "time-local":String (NoMethodError)
       
         if json.key?("type")
                ^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/datetime/milliseconds</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
<b> </b>    
<b> </b>        when "datetime" then Time.iso8601(val)
<b> </b>                                 ^^^^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "utc1": {
           "type": "datetime",
           "value": "1987-07-05T17:45:56.123Z"
         },
         "utc2": {
           "type": "datetime",
           "value": "1987-07-05T17:45:56.600Z"
         },
         "wita1": {
           "type": "datetime",
           "value": "1987-07-05T17:45:56.123+08:00"
         },
         "wita2": {
           "type": "datetime",
           "value": "1987-07-05T17:45:56.600+08:00"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
       
           when "datetime" then Time.iso8601(val)
                                    ^^^^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/datetime/timezone</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
<b> </b>    
<b> </b>        when "datetime" then Time.iso8601(val)
<b> </b>                                 ^^^^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "nzdt": {
           "type": "datetime",
           "value": "1987-07-05T17:45:56+13:00"
         },
         "nzst": {
           "type": "datetime",
           "value": "1987-07-05T17:45:56+12:00"
         },
         "pdt": {
           "type": "datetime",
           "value": "1987-07-05T17:45:56-05:00"
         },
         "utc": {
           "type": "datetime",
           "value": "1987-07-05T17:45:56Z"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
       
           when "datetime" then Time.iso8601(val)
                                    ^^^^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/example</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
<b> </b>    
<b> </b>        when "datetime" then Time.iso8601(val)
<b> </b>                                 ^^^^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "best-day-ever": {
           "type": "datetime",
           "value": "1987-07-05T17:45:00Z"
         },
         "numtheory": {
           "boring": {
             "type": "bool",
             "value": "false"
           },
           "perfection": [
             {
               "type": "integer",
               "value": "6"
             },
             {
               "type": "integer",
               "value": "28"
             },
             {
               "type": "integer",
               "value": "496"
             }
           ]
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
       
           when "datetime" then Time.iso8601(val)
                                    ^^^^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/float/inf-and-nan</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1 (last key "infinity"): expected value but found "Infinity" instead

<b>     input sent to parser-cmd:</b>
       {
         "infinity": {
           "type": "float",
           "value": "inf"
         },
         "infinity_neg": {
           "type": "float",
           "value": "-inf"
         },
         "infinity_plus": {
           "type": "float",
           "value": "+inf"
         },
         "nan": {
           "type": "float",
           "value": "nan"
         },
         "nan_neg": {
           "type": "float",
           "value": "nan"
         },
         "nan_plus": {
           "type": "float",
           "value": "nan"
         }
       }

<b>     output from parser-cmd (stdout):</b>
       infinity = Infinity
       infinity_neg = -Infinity
       infinity_plus = Infinity
       nan = NaN
       nan_neg = NaN
       nan_plus = NaN

<b>     want:</b>
       # We don't encode +nan and -nan back with the signs; many languages don't
       # support a sign on NaN (it doesn't really make much sense).
       nan = nan
       nan_neg = -nan
       nan_plus = +nan
       infinity = inf
       infinity_neg = -inf
       infinity_plus = +inf

<b>FAIL</b> <b>valid/inline-table/nest</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 2 (last key "arr_arr_tbl_val.one"): expected value but found '>' instead

<b>     input sent to parser-cmd:</b>
       {
         "arr_arr_tbl_empty": [
           [
             {}
           ]
         ],
         "arr_arr_tbl_val": [
           [
             {
               "one": {
                 "type": "integer",
                 "value": "1"
               }
             }
           ]
         ],
         "arr_arr_tbls": [
           [
             {
               "one": {
                 "type": "integer",
                 "value": "1"
               }
             },
             {
               "two": {
                 "type": "integer",
                 "value": "2"
               }
             }
           ]
         ],
         "arr_tbl_tbl": [
           {
             "tbl": {
               "one": {
                 "type": "integer",
                 "value": "1"
               }
             }
           }
         ],
         "tbl_arr_tbl": {
           "arr_tbl": [
             {
               "one": {
                 "type": "integer",
                 "value": "1"
               }
             }
           ]
         },
         "tbl_tbl_empty": {
           "tbl_0": {}
         },
         "tbl_tbl_val": {
           "tbl_1": {
             "one": {
               "type": "integer",
               "value": "1"
             }
           }
         }
       }

<b>     output from parser-cmd (stdout):</b>
       arr_arr_tbl_empty = [[{}]]
       arr_arr_tbl_val = [[{"one"=>1}]]
       arr_arr_tbls = [[{"one"=>1}, {"two"=>2}]]
       [[tbl_arr_tbl.arr_tbl]]
       one = 1
       [tbl_tbl_empty.tbl_0]
       [tbl_tbl_val.tbl_1]
       one = 1
       [[arr_tbl_tbl]]
       [arr_tbl_tbl.tbl]
       one = 1

<b>     want:</b>
       tbl_tbl_empty = { tbl_0 = {} }
       tbl_tbl_val   = { tbl_1 = { one = 1 } }
       tbl_arr_tbl   = { arr_tbl = [ { one = 1 } ] }
       arr_tbl_tbl   = [ { tbl = { one = 1 } } ]
       
       # Array-of-array-of-table is interesting because it can only
       # be represented in inline form.
       arr_arr_tbl_empty = [ [ {} ] ]
       arr_arr_tbl_val = [ [ { one = 1 } ] ]
       arr_arr_tbls  = [ [ { one = 1 }, { two = 2 } ] ]

<b>FAIL</b> <b>valid/key/dotted-empty</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1: unexpected end of table name (table names cannot be empty)

<b>     input sent to parser-cmd:</b>
       {
         "": {
           "x": {
             "type": "string",
             "value": "empty.x"
           }
         },
         "a": {
           "": {
             "": {
               "type": "string",
               "value": "empty.empty"
             }
           }
         },
         "x": {
           "": {
             "type": "string",
             "value": "x.empty"
           }
         }
       }

<b>     output from parser-cmd (stdout):</b>
       []
       x = "empty.x"
       [a.]
        = "empty.empty"
       [x]
        = "x.empty"

<b>     want:</b>
       ''.x = "empty.x"
       x."" = "x.empty"
       [a]
       "".'' = "empty.empty"

<b>FAIL</b> <b>valid/key/empty-1</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1: unexpected '=': key name appears blank

<b>     input sent to parser-cmd:</b>
       {
         "": {
           "type": "string",
           "value": "blank"
         }
       }

<b>     output from parser-cmd (stdout):</b>
       = "blank"

<b>     want:</b>
       "" = "blank"

<b>FAIL</b> <b>valid/key/empty-2</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1: unexpected '=': key name appears blank

<b>     input sent to parser-cmd:</b>
       {
         "": {
           "type": "string",
           "value": "blank"
         }
       }

<b>     output from parser-cmd (stdout):</b>
       = "blank"

<b>     want:</b>
       '' = "blank"

<b>FAIL</b> <b>valid/key/empty-3</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1: unexpected '=': key name appears blank

<b>     input sent to parser-cmd:</b>
       {
         "": {
           "type": "integer",
           "value": "0"
         }
       }

<b>     output from parser-cmd (stdout):</b>
       = 0

<b>     want:</b>
       ''=0

<b>FAIL</b> <b>valid/key/escapes</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1: TOML files cannot contain control characters: '0x08'

<b>     input sent to parser-cmd:</b>
       {
         "\u0008": {
           "type": "string",
           "value": "bell"
         },
         "\n": {
           "type": "string",
           "value": "newline"
         },
         "\"": {
           "type": "string",
           "value": "just a quote"
         },
         "\"quoted\"": {
           "quote": {
             "type": "bool",
             "value": "true"
           }
         },
         "a.b": {
           "": {}
         },
         "backsp\u0008\u0008": {},
         "": {
           "type": "string",
           "value": "latin capital letter A with grave"
         }
       }

<b>     output from parser-cmd (stdout):</b>
       "" = "bell"
       
        = "newline"
       "\"" = "just a quote"
       "" = "latin capital letter A with grave"
       ["\"quoted\""]
       quote = true
       ["a.b".""]
       ["backsp"]

<b>     want:</b>
       "\n" = "newline"
       "\b" = "bell"
       "\u00c0" = "latin capital letter A with grave"
       "\"" = "just a quote"
       
       ["backsp\b\b"]
       
       ["\"quoted\""]
       quote = true
       
       ["a.b"."\u00c0"]

<b>FAIL</b> <b>valid/key/quoted-unicode</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1: files cannot contain NULL bytes; probably using UTF-16; TOML files must be UTF-8

<b>     input sent to parser-cmd:</b>
       {
         "\u0000": {
           "type": "string",
           "value": "null"
         },
         "\u0008 \u000c A        ": {
           "type": "string",
           "value": "escaped key"
         },
         "\\u0000": {
           "type": "string",
           "value": "different key"
         },
         "l ~       ": {
           "type": "string",
           "value": "literal key"
         },
         "~       ": {
           "type": "string",
           "value": "basic key"
         }
       }

<b>     output from parser-cmd (stdout):</b>
       " " = "null"
       "  A        " = "escaped key"
       "\u0000" = "different key"
       "l ~       " = "literal key"
       "~       " = "basic key"

<b>     want:</b>
       
       "\u0000" = "null"
       '\u0000' = "different key"
       "\u0008 \u000c \U00000041 \u007f \u0080 \u00ff \ud7ff \ue000 \uffff \U00010000 \U0010ffff" = "escaped key"
       
       "~       " = "basic key"
       'l ~       ' = "literal key"

<b>FAIL</b> <b>valid/spec-example-1</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
<b> </b>    
<b> </b>        when "datetime" then Time.iso8601(val)
<b> </b>                                 ^^^^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "clients": {
           "data": [
             [
               {
                 "type": "string",
                 "value": "gamma"
               },
               {
                 "type": "string",
                 "value": "delta"
               }
             ],
             [
               {
                 "type": "integer",
                 "value": "1"
               },
               {
                 "type": "integer",
                 "value": "2"
               }
             ]
           ],
           "hosts": [
             {
               "type": "string",
               "value": "alpha"
             },
             {
               "type": "string",
               "value": "omega"
             }
           ]
         },
         "database": {
           "connection_max": {
             "type": "integer",
             "value": "5000"
           },
           "enabled": {
             "type": "bool",
             "value": "true"
           },
           "ports": [
             {
               "type": "integer",
               "value": "8001"
             },
             {
               "type": "integer",
               "value": "8001"
             },
             {
               "type": "integer",
               "value": "8002"
             }
           ],
           "server": {
             "type": "string",
             "value": "192.168.1.1"
           }
         },
         "owner": {
           "dob": {
             "type": "datetime",
             "value": "1979-05-27T07:32:00-08:00"
           },
           "name": {
             "type": "string",
             "value": "Lance Uppercut"
           }
         },
         "servers": {
           "alpha": {
             "dc": {
               "type": "string",
               "value": "eqdc10"
             },
             "ip": {
               "type": "string",
               "value": "10.0.0.1"
             }
           },
           "beta": {
             "dc": {
               "type": "string",
               "value": "eqdc10"
             },
             "ip": {
               "type": "string",
               "value": "10.0.0.2"
             }
           }
         },
         "title": {
           "type": "string",
           "value": "TOML Example"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
       
           when "datetime" then Time.iso8601(val)
                                    ^^^^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec-example-1-compact</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
<b> </b>    
<b> </b>        when "datetime" then Time.iso8601(val)
<b> </b>                                 ^^^^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "clients": {
           "data": [
             [
               {
                 "type": "string",
                 "value": "gamma"
               },
               {
                 "type": "string",
                 "value": "delta"
               }
             ],
             [
               {
                 "type": "integer",
                 "value": "1"
               },
               {
                 "type": "integer",
                 "value": "2"
               }
             ]
           ],
           "hosts": [
             {
               "type": "string",
               "value": "alpha"
             },
             {
               "type": "string",
               "value": "omega"
             }
           ]
         },
         "database": {
           "connection_max": {
             "type": "integer",
             "value": "5000"
           },
           "enabled": {
             "type": "bool",
             "value": "true"
           },
           "ports": [
             {
               "type": "integer",
               "value": "8001"
             },
             {
               "type": "integer",
               "value": "8001"
             },
             {
               "type": "integer",
               "value": "8002"
             }
           ],
           "server": {
             "type": "string",
             "value": "192.168.1.1"
           }
         },
         "owner": {
           "dob": {
             "type": "datetime",
             "value": "1979-05-27T07:32:00-08:00"
           },
           "name": {
             "type": "string",
             "value": "Lance Uppercut"
           }
         },
         "servers": {
           "alpha": {
             "dc": {
               "type": "string",
               "value": "eqdc10"
             },
             "ip": {
               "type": "string",
               "value": "10.0.0.1"
             }
           },
           "beta": {
             "dc": {
               "type": "string",
               "value": "eqdc10"
             },
             "ip": {
               "type": "string",
               "value": "10.0.0.2"
             }
           }
         },
         "title": {
           "type": "string",
           "value": "TOML Example"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
       
           when "datetime" then Time.iso8601(val)
                                    ^^^^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec/array-0</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 2 (last key "contributors.email"): expected value but found '>' instead

<b>     input sent to parser-cmd:</b>
       {
         "colors": [
           {
             "type": "string",
             "value": "red"
           },
           {
             "type": "string",
             "value": "yellow"
           },
           {
             "type": "string",
             "value": "green"
           }
         ],
         "contributors": [
           {
             "type": "string",
             "value": "Foo Bar \u003cfoo@example.com\u003e"
           },
           {
             "email": {
               "type": "string",
               "value": "bazqux@example.com"
             },
             "name": {
               "type": "string",
               "value": "Baz Qux"
             },
             "url": {
               "type": "string",
               "value": "https://example.com/bazqux"
             }
           }
         ],
         "integers": [
           {
             "type": "integer",
             "value": "1"
           },
           {
             "type": "integer",
             "value": "2"
           },
           {
             "type": "integer",
             "value": "3"
           }
         ],
         "nested_arrays_of_ints": [
           [
             {
               "type": "integer",
               "value": "1"
             },
             {
               "type": "integer",
               "value": "2"
             }
           ],
           [
             {
               "type": "integer",
               "value": "3"
             },
             {
               "type": "integer",
               "value": "4"
             },
             {
               "type": "integer",
               "value": "5"
             }
           ]
         ],
         "nested_mixed_array": [
           [
             {
               "type": "integer",
               "value": "1"
             },
             {
               "type": "integer",
               "value": "2"
             }
           ],
           [
             {
               "type": "string",
               "value": "a"
             },
             {
               "type": "string",
               "value": "b"
             },
             {
               "type": "string",
               "value": "c"
             }
           ]
         ],
         "numbers": [
           {
             "type": "float",
             "value": "0.1"
           },
           {
             "type": "float",
             "value": "0.2"
           },
           {
             "type": "float",
             "value": "0.5"
           },
           {
             "type": "integer",
             "value": "1"
           },
           {
             "type": "integer",
             "value": "2"
           },
           {
             "type": "integer",
             "value": "5"
           }
         ],
         "string_array": [
           {
             "type": "string",
             "value": "all"
           },
           {
             "type": "string",
             "value": "strings"
           },
           {
             "type": "string",
             "value": "are the same"
           },
           {
             "type": "string",
             "value": "type"
           }
         ]
       }

<b>     output from parser-cmd (stdout):</b>
       colors = ["red", "yellow", "green"]
       contributors = ["Foo Bar <foo@example.com>", {"email"=>"bazqux@example.com", "name"=>"Baz Qux", "url"=>"https://example.com/bazqux"}]
       integers = [1, 2, 3]
       nested_arrays_of_ints = [[1, 2], [3, 4, 5]]
       nested_mixed_array = [[1, 2], ["a", "b", "c"]]
       numbers = [0.1, 0.2, 0.5, 1, 2, 5]
       string_array = ["all", "strings", "are the same", "type"]

<b>     want:</b>
       integers = [ 1, 2, 3 ]
       colors = [ "red", "yellow", "green" ]
       nested_arrays_of_ints = [ [ 1, 2 ], [3, 4, 5] ]
       nested_mixed_array = [ [ 1, 2 ], ["a", "b", "c"] ]
       string_array = [ "all", 'strings', """are the same""", '''type''' ]
       
       # Mixed-type arrays are allowed
       numbers = [ 0.1, 0.2, 0.5, 1, 2, 5 ]
       contributors = [
         "Foo Bar <foo@example.com>",
         { name = "Baz Qux", email = "bazqux@example.com", url = "https://example.com/bazqux" }
       ]

<b>FAIL</b> <b>valid/spec/float-2</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1 (last key "sf1"): expected value but found "Infinity" instead

<b>     input sent to parser-cmd:</b>
       {
         "sf1": {
           "type": "float",
           "value": "+inf"
         },
         "sf2": {
           "type": "float",
           "value": "+inf"
         },
         "sf3": {
           "type": "float",
           "value": "-inf"
         },
         "sf4": {
           "type": "float",
           "value": "nan"
         },
         "sf5": {
           "type": "float",
           "value": "nan"
         },
         "sf6": {
           "type": "float",
           "value": "nan"
         }
       }

<b>     output from parser-cmd (stdout):</b>
       sf1 = Infinity
       sf2 = Infinity
       sf3 = -Infinity
       sf4 = NaN
       sf5 = NaN
       sf6 = NaN

<b>     want:</b>
       # infinity
       sf1 = inf  # positive infinity
       sf2 = +inf # positive infinity
       sf3 = -inf # negative infinity
       
       # not a number
       sf4 = nan  # actual sNaN/qNaN encoding is implementation-specific
       sf5 = +nan # same as `nan`
       sf6 = -nan # valid, actual encoding is implementation-specific

<b>FAIL</b> <b>valid/spec/local-date-0</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
<b> </b>    
<b> </b>      if json.key?("type")
<b> </b>             ^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "ld1": {
           "type": "date-local",
           "value": "1979-05-27"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
       
         if json.key?("type")
                ^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec/local-date-time-0</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "datetime-local":String (NoMethodError)
<b> </b>    
<b> </b>      if json.key?("type")
<b> </b>             ^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "ldt1": {
           "type": "datetime-local",
           "value": "1979-05-27T07:32:00"
         },
         "ldt2": {
           "type": "datetime-local",
           "value": "1979-05-27T00:32:00.999999"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "datetime-local":String (NoMethodError)
       
         if json.key?("type")
                ^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec/local-time-0</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "time-local":String (NoMethodError)
<b> </b>    
<b> </b>      if json.key?("type")
<b> </b>             ^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "lt1": {
           "type": "time-local",
           "value": "07:32:00"
         },
         "lt2": {
           "type": "time-local",
           "value": "00:32:00.999999"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "time-local":String (NoMethodError)
       
         if json.key?("type")
                ^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec/offset-date-time-0</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
<b> </b>    
<b> </b>        when "datetime" then Time.iso8601(val)
<b> </b>                                 ^^^^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "odt1": {
           "type": "datetime",
           "value": "1979-05-27T07:32:00Z"
         },
         "odt2": {
           "type": "datetime",
           "value": "1979-05-27T00:32:00-07:00"
         },
         "odt3": {
           "type": "datetime",
           "value": "1979-05-27T00:32:00.999999-07:00"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
       
           when "datetime" then Time.iso8601(val)
                                    ^^^^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec/offset-date-time-1</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
<b> </b>    
<b> </b>        when "datetime" then Time.iso8601(val)
<b> </b>                                 ^^^^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "odt4": {
           "type": "datetime",
           "value": "1979-05-27T07:32:00Z"
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:24:in `convert': undefined method `iso8601' for Time:Class (NoMethodError)
       
           when "datetime" then Time.iso8601(val)
                                    ^^^^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/spec/table-7</b>
<b> </b>    ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
<b> </b>    
<b> </b>      if json.key?("type")
<b> </b>             ^^^^^
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
<b> </b>    	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
<b> </b>    
<b> </b>    Exit 1

<b>     input sent to parser-cmd:</b>
       {
         "breed": {
           "type": "string",
           "value": "pug"
         },
         "name": {
           "type": "string",
           "value": "Fido"
         },
         "owner": {
           "member_since": {
             "type": "date-local",
             "value": "1999-08-04"
           },
           "name": {
             "type": "string",
             "value": "Regina Dogman"
           }
         }
       }

<b>     output from parser-cmd (stderr):</b>
       ./src/ruby-toml-rb/ruby-toml-rb-encoder:10:in `convert': undefined method `key?' for "date-local":String (NoMethodError)
       
         if json.key?("type")
                ^^^^^
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:36:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `block in convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `to_h'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:39:in `convert'
       	from ./src/ruby-toml-rb/ruby-toml-rb-encoder:43:in `<main>'
       
       Exit 1

<b>     want:</b>
          <empty>

<b>FAIL</b> <b>valid/string/quoted-unicode</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1 (last key "basic_string"): expected four hexadecimal digits after '\u', but got "~ \\u0080  \\uD7FF \ue000 \\uFFFF  \\u{" instead

<b>     input sent to parser-cmd:</b>
       {
         "basic_string": {
           "type": "string",
           "value": "~       "
         },
         "escaped_string": {
           "type": "string",
           "value": "\u0000 \u0008 \u000c A        "
         },
         "literal_string": {
           "type": "string",
           "value": "~       "
         },
         "not_escaped_string": {
           "type": "string",
           "value": "\\u0000 \\u0008 \\u000c \\U00000041 \\u007f \\u0080 \\u00ff \\ud7ff \\ue000 \\uffff \\U00010000 \\U0010ffff"
         }
       }

<b>     output from parser-cmd (stdout):</b>
       basic_string = "~ \u0080  \uD7FF  \uFFFF  \u{10FFFF}"
       escaped_string = "\u0000 \b \f A \u007F \u0080  \uD7FF  \uFFFF  \u{10FFFF}"
       literal_string = "~ \u0080  \uD7FF  \uFFFF  \u{10FFFF}"
       not_escaped_string = "\\u0000 \\u0008 \\u000c \\U00000041 \\u007f \\u0080 \\u00ff \\ud7ff \\ue000 \\uffff \\U00010000 \\U0010ffff"

<b>     want:</b>
       
       escaped_string = "\u0000 \u0008 \u000c \U00000041 \u007f \u0080 \u00ff \ud7ff \ue000 \uffff \U00010000 \U0010ffff"
       not_escaped_string = '\u0000 \u0008 \u000c \U00000041 \u007f \u0080 \u00ff \ud7ff \ue000 \uffff \U00010000 \U0010ffff'
       
       basic_string = "~       "
       literal_string = '~       '

<b>FAIL</b> <b>valid/table/empty-name</b>
<b> </b>    decode TOML from encoder:
<b> </b>      toml: line 1: unexpected end of table name (table names cannot be empty)

<b>     input sent to parser-cmd:</b>
       {
         "": {
           "a": {
             "x": {
               "type": "integer",
               "value": "2"
             }
           },
           "x": {
             "type": "integer",
             "value": "1"
           }
         },
         "a": {
           "": {
             "x": {
               "type": "integer",
               "value": "3"
             }
           }
         }
       }

<b>     output from parser-cmd (stdout):</b>
       []
       x = 1
       [.a]
       x = 2
       [a.]
       x = 3

<b>     want:</b>
       ['']
       x = 1
       
       ["".a]
       x = 2
       
       [a.'']
       x = 3

toml-test v2023-12-03 [./src/ruby-toml-rb/ruby-toml-rb-encoder]: using embedded tests
encoder tests: 136 passed, 33 failed
took 77.8 199.80
</pre>
